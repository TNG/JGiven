plugins {
    id 'java-library'
}

repositories {
    mavenCentral()
}

description = "Module for injecting automated performance analysis for test methods"

dependencies {
    implementation project(":jgiven-core")
    implementation("com.google.guava:guava:$guavaVersion")
    implementation "net.bytebuddy:byte-buddy-gradle-plugin:$bytebuddyVersion"
    implementation "net.bytebuddy:byte-buddy-agent:$bytebuddyVersion"
    testImplementation("com.google.guava:guava-testlib:$guavaVersion")
    testImplementation 'org.mockito:mockito-inline:3.12.4'
}

def generatedSourceDir = "generatedSrc/java"

sourceSets {
    main {
        java {
            srcDirs = ["src/main/java", generatedSourceDir]
        }
    }
}

jar {
    manifest {
        attributes(
                "Premain-Class": "com.tngtech.jgiven.timing.TimerInjectorAgent"
        )
    }
}
