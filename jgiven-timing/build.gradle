plugins {
    id 'java-library'
    id('jgiven-checkstyle')
    id('jgiven-java')
}

repositories {
    mavenCentral()
}

description = "Module for injecting automated performance analysis for test methods"

dependencies {
    implementation project(":jgiven-core")
    implementation("com.google.guava:guava:33.5.0-jre")
    implementation libs.plugins.byteBuddy.plugin
    implementation libs.byteBuddy.agent

    testImplementation libs.mockito
    testImplementation("com.google.guava:guava-testlib:33.5.0-jre")
}

def generatedSourceDir = "generatedSrc/java"

sourceSets {
    main {
        java {
            srcDirs = ["src/main/java", generatedSourceDir]
        }
    }
}

jar {
    manifest {
        attributes(
                "Premain-Class": "com.tngtech.jgiven.timing.TimerInjectorAgent"
        )
    }
}
